/*\
module-type: library
title: $:/plugins/tiddlybase/tiddlybase-utils/url.js
type: application/javascript
\*/

(()=>{"use strict";var e={753:(e,t,r)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.resolveURL=t.getExtension=t.getParentURL=void 0;const i=r(842),n=r(625),o=(0,n.getWikiInfoConfigValue)("external-url-path-prefix")??"",a=(0,n.getWikiInfoConfigValue)("default-storage-prefix"),s=(0,n.getWikiInfoConfigValue)("default-file-location"),l=e=>e&&e.replace(/^[\/]+/,"").replace(/[\/]+$/,""),d=(...e)=>e.map(l).filter((e=>e&&e?.length>0)).join("/");t.getParentURL=()=>i.$tw?.tiddlybase?.parentLocation?.href;t.getExtension=e=>{const t=new URL(e,"http://www.example.com").pathname;if(t.indexOf(".")<0)return;const r=t.split(".");return 0!==r.length?r.slice(-1)[0].toLowerCase():void 0};const p=(()=>{if(i.$tw?.desktop){let e=([...new URLSearchParams(window.location.search)].find((([e,t])=>"pathname"===e))??[])[1];return d(e,s)}return""})(),f=e=>i.$tw?.tiddlybase?.inSandboxedIframe&&i.$tw?.tiddlybase?.parentClient?i.$tw.tiddlybase.parentClient("getDownloadURL",[d(a,e)]):i.$tw?.desktop?`file:///${d(p,e)}`:(e=>d(s,e))(e);t.resolveURL=e=>(e=>{const t=e.toLowerCase().trim();return t.startsWith("http://")||t.startsWith("https://")||t.startsWith("//")})(e)?e:e.startsWith(o)?f(e.substring(o.length)):((0,t.getParentURL)()??"")+e},842:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.$tw=void 0,t.$tw=globalThis.$tw},625:e=>{e.exports=require("$:/plugins/tiddlybase/tiddlybase-utils/wiki-info-config.js")}},t={};var r=function r(i){var n=t[i];if(void 0!==n)return n.exports;var o=t[i]={exports:{}};return e[i](o,o.exports,r),o.exports}(753),i=exports;for(var n in r)i[n]=r[n];r.__esModule&&Object.defineProperty(i,"__esModule",{value:!0})})();
//# sourceMappingURL=/sourcemaps/plugins/tiddlybase/tiddlybase-utils/url.js.map
/*\
module-type: library
title: $:/plugins/tiddlybase/react/react-base-widget.js
type: application/javascript
\*/

(()=>{"use strict";var e={29:(e,t,o)=>{var r=o(649);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},649:e=>{e.exports=require("$:/plugins/tiddlybase/react/react-dom.js")},434:e=>{e.exports=require("$:/plugins/tiddlybase/react/react.js")},298:e=>{e.exports=require("$:/plugins/tiddlybase/tiddlybase-utils/base-widget.js")},0:e=>{e.exports=require("$:/plugins/tiddlybase/tiddlybase-utils/dom-removal-detector.js")}},t={};function o(r){var s=t[r];if(void 0!==s)return s.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,o),i.exports}var r={};(()=>{var e=r;Object.defineProperty(e,"__esModule",{value:!0}),e.ReactBaseWidget=void 0;const t=o(298),s=o(0),i=o(29),d=o(434);class n extends t.BaseWidget{destroy(){this.domNode&&((0,s.unmonitorRemoval)(this.domNode),this.domNode.parentElement?.removeChild(this.domNode)),this.domNode=void 0,this.root&&this.root.unmount(),this.root=void 0}render(e,t){this.domNode&&this.destroy(),super.render(e,t)}getComponent(){return(0,d.createElement)("span",null,"please override ReactBaseWidget.getComponent()")}initReact(){return this.domNode=this.domNode??this.document.createElement("div"),this.root=this.root??(0,i.createRoot)(this.domNode),this.component=this.component??this.getComponent(),this.domNode}reactRender(){this.component&&(console.log("invoking react render fn"),this.root?.render(this.component))}onPostDomInsert(){this.domNode&&(0,s.monitorRemoval)(this.domNode,(()=>{console.log("root element orphaned, unmounting"),this.destroy()}))}getDOMNode(){return this.domNode||(this.initReact(),this.reactRender()),this.domNode}removeChildDomNodes(){super.removeChildDomNodes(),this.destroy()}refresh(e){var t=this.computeAttributes();return Object.keys(t).length>0?(console.log("attributes changed, rerendering component"),this.component=this.getComponent(),this.reactRender(),!0):this.refreshChildren(e)}}e.ReactBaseWidget=n})();var s=exports;for(var i in r)s[i]=r[i];r.__esModule&&Object.defineProperty(s,"__esModule",{value:!0})})();
//# sourceMappingURL=/sourcemaps/react-base-widget.js.map